"""
ASR Service — модуль для распознавания речи.
На данный момент реализован как мок: вместо реального распознавания
возвращает тестовый текст или содержимое файла.
"""

from pathlib import Path


def transcribe_audio(audio_path: str) -> str:
    """
    Мок-функция распознавания речи.
    В реальном проекте сюда подключается Yandex SpeechKit / OpenAI Whisper / Vosk и т.д.

    :param audio_path: путь до аудиофайла
    :return: текст транскрипции
    """
    path = Path(audio_path)

    if not path.exists():
        # Возвращаем заглушку, если файл отсутствует
        return "Привет мир из пайплайна. Нужно сделать задачу в календарь и в Jira."

    try:
        # Если файл есть, просто читаем как текстовый (для тестов удобно)
        return path.read_text(encoding="utf-8")
    except Exception:
        # Если файл бинарный — возвращаем заглушку
        return "Тестовая транскрипция из бинарного файла. Добавить задачу в Jira."
